# Arch Linux å®‰è£…æŒ‡å—

## å®‰è£…å‰çš„å‡†å¤‡

ğŸ§­ å‡¡äº‹é¢„åˆ™ç«‹ï¼Œä¸é¢„åˆ™åºŸ

è¿™ä¸€ç« å¼€å§‹ï¼Œæˆ‘ä»¬æ­£å¼å¼€å§‹å®‰è£… Arch Linuxã€‚ä½†åœ¨åŠ¨æ‰‹ä¹‹å‰ï¼Œè¯·å…ˆå®Œæˆå¦‚ä¸‹å‡†å¤‡ï¼š

â„¹ï¸ æç¤ºï¼šæœ¬æ–‡ç»Ÿä¸€ä»¥ UEFI + GPT æ–¹å¼å®‰è£…ï¼Œä¼ ç»Ÿ BIOS/MBR ä¸å†èµ˜è¿°ã€‚

â„¹ï¸ æç¤ºï¼šæ–‡ä¸­å¸¦æœ‰ EULA çš„è½¯ä»¶ä¸ºä¸“æœ‰è½¯ä»¶ï¼Œè¯·è‡ªè¡Œæ–Ÿé…Œæ˜¯å¦ä½¿ç”¨ã€‚

### 1. ç¡®ä¿ç½‘ç»œç¯å¢ƒ
- æœ‰çº¿ç½‘ç»œï¼šè‹¥é€šè¿‡è·¯ç”±å™¨ DHCP è‡ªåŠ¨ä¸Šç½‘ï¼Œæ— éœ€é¢å¤–è®¾ç½®ã€‚
- æ— çº¿ç½‘ç»œï¼šè¯·æå‰å°† Wiâ€‘Fi SSID æ”¹ä¸ºå®¹æ˜“è¯†åˆ«çš„è‹±æ–‡åç§°ï¼›å®‰è£…ç¯å¢ƒä¸‹æ— æ³•æ˜¾ç¤º/è¾“å…¥ä¸­æ–‡ SSIDã€‚æŸäº›ç¬”è®°æœ¬æœ‰æ— çº¿ç½‘å¡ç¡¬ä»¶å¼€å…³æˆ–å¿«æ·é”®ï¼Œå¼€æœºå‰è¯·ç¡®ä¿å·²å¼€å¯ã€‚

### 2. ä¸‹è½½å®‰è£…é•œåƒ
- å¯ä»å¼€æºé•œåƒç«™æˆ– Arch å®˜æ–¹é¡µé¢ä¸‹è½½ ISOã€‚å›½å†…å¸¸ç”¨é•œåƒç«™ï¼ˆæ‹©ä¸€å³å¯ï¼‰ï¼š
  - ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦å¼€æºé•œåƒç«™ï¼ˆUSTCï¼‰
  - æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™ï¼ˆTUNAï¼‰
  - åä¸ºå¼€æºé•œåƒç«™
  - å…°å·å¤§å­¦å¼€æºé•œåƒç«™
- å…¶ä¸­ USTC/TUNA ç›´æ¥åœ¨ä¾§æ é€‰æ‹© Arch Linuxï¼›å…¶ä½™é•œåƒé€šå¸¸è·¯å¾„ä¸º `iso > 20XX.XX.XX > archlinux-20XX.XX.XX-x86_64.iso`ã€‚

âš ï¸ æ³¨æ„ï¼šè¯·åŠ¡å¿…ä¸‹è½½æœ€æ–° ISOã€‚Arch ä¸ºæ»šåŠ¨å‘è¡Œç‰ˆï¼Œä¸å­˜åœ¨â€œæ—§é•œåƒ=æ—§ç³»ç»Ÿâ€çš„æ¦‚å¿µã€‚

### 3. åˆ»å½•å®‰è£… U ç›˜ï¼ˆâ‰¥2GBï¼‰
- Windowsï¼šæ¨è Ventoyã€Rufusã€PowerISOï¼ˆEULAï¼‰ã€‚ä¹Ÿå¯ç”¨ balenaEtcherã€‚
- Linuxï¼šå¯ç”¨ Ventoyã€balenaEtcherï¼Œæˆ–ç›´æ¥ä½¿ç”¨ `dd` å‘½ä»¤ã€‚

â„¹ï¸ æç¤ºï¼šä½¿ç”¨ balenaEtcher åˆ¶ä½œåè‹¥éœ€æŠŠ U ç›˜æ¢å¤ä¸ºæ™®é€šå­˜å‚¨ç›˜ï¼Œè¯·ç”¨ç£ç›˜åˆ†åŒºå·¥å…·ï¼ˆå¦‚ KDE åˆ†åŒºç®¡ç†å™¨ã€DiskGeniusï¼ˆEULAï¼‰ï¼‰é‡å»ºåˆ†åŒºè¡¨å†æ ¼å¼åŒ–ã€‚

### 4. ä¸º Arch åˆ†å‡ºç¡¬ç›˜ç©ºé—´ï¼ˆå¯é€‰ï¼ŒåŒç³»ç»Ÿï¼‰
1) ç³»ç»Ÿç›˜ï¼šè‹¥ä¸ Windows å…±ç”¨åŒä¸€ç¡¬ç›˜ï¼Œå»ºè®®åœ¨ Windows çš„â€œç£ç›˜ç®¡ç†â€ä¸­å‹ç¼©å‡ºè‡³å°‘ 128GB ç©ºé—´ç»™ Archã€‚ä»…â€œå‹ç¼©å·â€ï¼Œä¸è¦åœ¨ç©ºé—²ç©ºé—´å†…æ–°å»ºåˆ†åŒºã€‚
2) EFI åˆ†åŒºï¼šä¸ Windows åŒç›˜æ—¶ï¼Œè¯·ç¡®è®¤ EFI åˆ†åŒºå®¹é‡ â‰¥256MBã€‚è‹¥ä¸è¶³ï¼Œå»ºè®®æ‰©å®¹ï¼Œæˆ–å‚è€ƒ ArchWiki é‡‡ç”¨é¢å¤–æŒ‚è½½ç‚¹çš„æ–¹æ¡ˆã€‚

### 5. è·å– BitLocker æ¢å¤å¯†é’¥ï¼ˆå¦‚å¯ç”¨ï¼‰
è‹¥ Windows åˆ†åŒºä½¿ç”¨ BitLockerï¼Œè¯·æå‰åœ¨å¾®è½¯è´¦å·é¡µé¢è·å–æ¢å¤å¯†é’¥ï¼Œä»¥é˜²åç»­å¯åŠ¨ä¿®å¤æˆ–å¼•å¯¼é…ç½®æ—¶éœ€è¦è§£é”ã€‚

### 6. è¿›å…¥ä¸»æ¿ BIOS/UEFI è®¾ç½®
- å¸¸è§è¿›å…¥é”®ï¼šF2/F8/F10/DELï¼ˆè§†ä¸»æ¿è€Œå®šï¼‰ã€‚
- æ›¿ä»£æ–¹æ³•ï¼ˆWindows 10ï¼‰ï¼šæŒ‰ä½ Shift ç‚¹å‡»é‡å¯ â†’ ç–‘éš¾è§£ç­” â†’ UEFI å›ºä»¶è®¾ç½®ã€‚

### 7. å…³é—­ Secure Boot
åœ¨ Security ç›¸å…³é€‰é¡¹ä¸­å°† Secure Boot è®¾ç½®ä¸º Disabledã€‚æå°‘æ•°è®¾å¤‡æ— æ³•å…³é—­ä¸”ä»…å…è®¸åŠ è½½ Windows ç­¾åï¼Œæ­¤ç±»è®¾å¤‡ä¸é€‚åˆåŸç”Ÿå®‰è£…ï¼ˆå¯è€ƒè™‘è™šæ‹Ÿæœºï¼‰ã€‚

### 8. å¯åŠ¨æ–¹å¼è°ƒæ•´ä¸º UEFIï¼ˆå¦‚é€‚ç”¨ï¼‰
æ—§ä¸»æ¿å¯èƒ½éœ€å°† Boot Mode è®¾ä¸º UEFI Onlyï¼Œè€Œé Legacy/CSMã€‚

### 9. è°ƒæ•´å¯åŠ¨é¡ºåº
åœ¨ Boot é€‰é¡¹ä¸­å°† U ç›˜ç½®äºç¬¬ä¸€å¯åŠ¨é¡¹ã€‚

### 10. ä¿å­˜å¹¶é‡å¯
ä¿å­˜ BIOS/UEFI è®¾ç½®ï¼ˆé€šå¸¸æ˜¯ F10ï¼‰å¹¶é‡å¯ï¼Œä»å®‰è£…ä»‹è´¨å¯åŠ¨ï¼Œè¿›å…¥ Arch å®‰è£…ç¯å¢ƒï¼ˆå±å¹•ä¼šå‡ºç°ä¸€å¤´â€œç‰›â€åœ¨è®²è¯ï¼‰ã€‚

## ä½¿ç”¨ archinstall å¿«é€Ÿå®‰è£…ï¼ˆæ¨èï¼‰

å¦‚æœå¸Œæœ›é€šè¿‡å®˜æ–¹å¼•å¯¼å¼å®‰è£…å™¨å¿«é€Ÿå®Œæˆå®‰è£…ï¼Œå¯ä½¿ç”¨ `archinstall`ï¼š

```bash
# ç¡®è®¤å·²ä»¥ UEFI å¯åŠ¨ï¼ˆç›®å½•å­˜åœ¨å³ä¸º UEFIï¼‰
ls /sys/firmware/efi/efivars

# åŒæ­¥æ—¶é—´ï¼ˆå»ºè®®ï¼‰
timedatectl set-ntp true

# å…ˆè¿æ¥ä¸Šç½‘ç»œ
sudo systemctl NetworkManager.service
nmtui

# å¯åŠ¨å®˜æ–¹å®‰è£…å™¨
archinstall
```

åœ¨äº¤äº’ç•Œé¢ä¸­æŒ‰éœ€é€‰æ‹©ï¼š
==å¦‚æœå®‰è£…hyprland, profileé€‰æ‹©minimalå³å¯ï¼ˆæœ€ç²¾ç®€çš„æ— æ¡Œé¢ç¯å¢ƒï¼‰==
- é”®ç›˜å¸ƒå±€ã€è¯­è¨€ä¸ Localeï¼ˆå»ºè®® `zh_CN.UTF-8` ä¸ `en_US.UTF-8`ï¼‰
- ç£ç›˜ä¸åˆ†åŒºæ–¹æ¡ˆï¼ˆUEFI+GPTï¼›EFI åˆ†åŒº â‰¥256MBï¼›æ ¹åˆ†åŒºå¯é€‰ ext4 æˆ– btrfsï¼‰
- å¼•å¯¼ç¨‹åºï¼ˆGRUB/System bootï¼‰
- ç½‘ç»œï¼ˆNetworkManagerï¼‰ä¸æ—¶é—´åŒæ­¥
- ç”¨æˆ·ä¸å¯†ç ï¼ˆåˆ›å»ºæ™®é€šç”¨æˆ·å¹¶èµ‹äºˆ wheel ç»„æƒé™ï¼‰
- æ¡Œé¢ç¯å¢ƒï¼ˆå¯é€‰ KDE/GNOME ç­‰ï¼‰
- é•œåƒæºï¼ˆä¼˜å…ˆé€‰æ‹©ä¸­å›½é•œåƒï¼‰

å®‰è£…å®ŒæˆåæŒ‰æç¤ºé‡å¯ï¼Œç§»é™¤å®‰è£…ä»‹è´¨å³å¯è¿›å…¥æ–°ç³»ç»Ÿã€‚è‹¥ä½ æ›´åå¥½æ‰‹åŠ¨è¿‡ç¨‹ï¼Œè¯·ç»§ç»­é˜…è¯»ä¸‹ä¸€èŠ‚ã€‚

## åŸºç¡€å®‰è£…æ­¥éª¤ï¼ˆéarchinstallï¼‰

### 1. éªŒè¯å¯åŠ¨æ¨¡å¼
```bash
# æ£€æŸ¥æ˜¯å¦ä¸º UEFI æ¨¡å¼
ls /sys/firmware/efi/efivars
```

### 2. è¿æ¥ç½‘ç»œ
```bash
# æœ‰çº¿ç½‘ç»œï¼ˆé€šå¸¸è‡ªåŠ¨è¿æ¥ï¼‰
ping archlinux.org

# æ— çº¿ç½‘ç»œ
iwctl
[iwd]# device list
[iwd]# station wlan0 scan
[iwd]# station wlan0 get-networks
[iwd]# station wlan0 connect "ç½‘ç»œåç§°"
# è¾“å…¥å¯†ç åå›è½¦ï¼Œå¦‚æœå¯†ç æ­£ç¡®ä¸ä¼šæœ‰ä»»ä½•æé†’
[iwd]# exit
```
æ£€æµ‹ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
```
ping www.baidu.com
```


### 3. æ›´æ–°ç³»ç»Ÿæ—¶é—´
```bash
timedatectl set-ntp true
```

### 4. åˆ†åŒº
```bash
# æŸ¥çœ‹ç£ç›˜
fdisk -l

# åˆ†åŒºï¼ˆä»¥ /dev/sda ä¸ºä¾‹ï¼‰
fdisk /dev/sda
```

æ¨èåˆ†åŒºæ–¹æ¡ˆï¼š
- EFI åˆ†åŒºï¼š512MB (FAT32)
- æ ¹åˆ†åŒºï¼šå‰©ä½™ç©ºé—´ (ext4)
- äº¤æ¢åˆ†åŒºï¼šå†…å­˜å¤§å°çš„ 1-2 å€

### 5. æ ¼å¼åŒ–åˆ†åŒº
```bash
# æ ¼å¼åŒ– EFI åˆ†åŒº
mkfs.fat -F32 /dev/sda1

# æ ¼å¼åŒ–æ ¹åˆ†åŒº
mkfs.ext4 /dev/sda2

# åˆ›å»ºäº¤æ¢åˆ†åŒº
mkswap /dev/sda3
swapon /dev/sda3
```

### 6. æŒ‚è½½åˆ†åŒº
```bash
# æŒ‚è½½æ ¹åˆ†åŒº
mount /dev/sda2 /mnt

# åˆ›å»ºå¹¶æŒ‚è½½ EFI åˆ†åŒº
mkdir /mnt/boot
mount /dev/sda1 /mnt/boot
```

### 7. é…ç½®é•œåƒæºï¼ˆé‡è¦ï¼‰
```bash
# ç¼–è¾‘é•œåƒæºé…ç½®
nano /etc/pacman.d/mirrorlist
```

æ·»åŠ å›½å†…é•œåƒæºåˆ°æ–‡ä»¶é¡¶éƒ¨ï¼š
>å¯ä»¥çœ‹ä¸€ä¸‹ä¸‹æ–¹æ˜¯å¦æœ‰Chinaï¼Œå¯ä»¥æŒ‰/æœç´¢ï¼Œæœç´¢Chinaçš„éƒ¨åˆ†ï¼ŒæŒ‰Shift+Vè¿›å…¥é€‰æ‹©æ¨¡å¼ï¼ŒæŒ‰jå¾€ä¸‹é€‰æ‹©ã€‚é€‰ä¸­åæŒ‰xå‰ªåˆ‡ï¼Œç„¶åæŒ‰ggï¼ˆä¸¤æ¬¡gï¼‰å›åˆ°æ–‡ä»¶æœ€å¼€å§‹ï¼ŒæŒ‰Shift+Pè¿›è¡Œç²˜è´´ã€‚
>å°±ä¸éœ€è¦å†æ‰‹åŠ¨è¾“å…¥äº†ã€‚å¦‚æœæ²¡æœ‰ï¼Œå°±æ‰‹åŠ¨è¾“å…¥å§å“ˆå“ˆå“ˆ
```
Server = https://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch
Server = https://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch
Server = https://mirrors.aliyun.com/archlinux/$repo/os/$arch
```

### 8. å®‰è£…åŸºç¡€ç³»ç»Ÿ
```bash
pacstrap /mnt base linux linux-firmware
```

### 9. ç”Ÿæˆ fstab
```bash
genfstab -U /mnt >> /mnt/etc/fstab
```

### 10. è¿›å…¥æ–°ç³»ç»Ÿ
```bash
arch-chroot /mnt
```

## ç³»ç»Ÿé…ç½®

### 1. è®¾ç½®æ—¶åŒº
```bash
ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
hwclock --systohc
```

### 2. æœ¬åœ°åŒ–è®¾ç½®
```bash
# ç¼–è¾‘ locale.gen
nano /etc/locale.gen
```

å–æ¶ˆæ³¨é‡Šä»¥ä¸‹è¡Œï¼š
```
en_US.UTF-8 UTF-8
zh_CN.UTF-8 UTF-8
```

ç”Ÿæˆ localeï¼š
```bash
locale-gen
```

è®¾ç½®ç³»ç»Ÿè¯­è¨€ï¼š
```bash
echo 'LANG=zh_CN.UTF-8' > /etc/locale.conf
```

### 3. ç½‘ç»œé…ç½®
```bash
# è®¾ç½®ä¸»æœºå
echo 'archlinux' > /etc/hostname

# é…ç½® hosts æ–‡ä»¶
nano /etc/hosts
```

æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š
```
127.0.0.1	localhost
::1		localhost
127.0.1.1	archlinux.localdomain	archlinux
```

### 4. è®¾ç½® root å¯†ç 
```bash
passwd
```

### 5. å®‰è£…å¼•å¯¼ç¨‹åº
```bash
# å®‰è£… GRUB
pacman -S grub efibootmgr

# å®‰è£…åˆ° EFI åˆ†åŒº
grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=GRUB

# ç”Ÿæˆé…ç½®æ–‡ä»¶
grub-mkconfig -o /boot/grub/grub.cfg
```

### 6. å®‰è£…ç½‘ç»œç®¡ç†å·¥å…·
```bash
pacman -S networkmanager
systemctl enable NetworkManager
```

## å®Œæˆå®‰è£…

```bash
# é€€å‡º chroot
exit

# å¸è½½åˆ†åŒº
umount -R /mnt

# é‡å¯
reboot
```

## é¦–æ¬¡å¯åŠ¨

1. ç§»é™¤å®‰è£…ä»‹è´¨
2. ç³»ç»Ÿå°†è‡ªåŠ¨å¯åŠ¨åˆ° Arch Linux
3. ä½¿ç”¨ root è´¦æˆ·ç™»å½•
4. åˆ›å»ºæ™®é€šç”¨æˆ·ï¼š

```bash
# åˆ›å»ºç”¨æˆ·
useradd -m -G wheel username

# è®¾ç½®å¯†ç 
passwd username

# å®‰è£… sudo
pacman -S sudo

# ç¼–è¾‘ sudoers
EDITOR=nano visudo
```

å–æ¶ˆæ³¨é‡Šä»¥ä¸‹è¡Œï¼š
```
%wheel ALL=(ALL) ALL
```

## ä¸‹ä¸€æ­¥

å®‰è£…å®Œæˆåï¼Œå»ºè®®ç»§ç»­é˜…è¯»ï¼š
- [åŸºç¡€é…ç½®](/guide/basic-config) - é…ç½®ä¸­æ–‡è¾“å…¥æ³•å’ŒåŸºç¡€è½¯ä»¶
- [æ¡Œé¢ç¯å¢ƒ](/guide/desktop-env) - å®‰è£…å’Œé…ç½®æ¡Œé¢ç¯å¢ƒ
- [å¸¸ç”¨è½¯ä»¶](/software/common) - å®‰è£…æ—¥å¸¸ä½¿ç”¨çš„è½¯ä»¶
